<!DOCTYPE html>
<html>
<head>
  <style>
    .document-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1em;
      background: #F1F3F5;
      border-radius: 10px;
      padding: 1em;
      font-size: 1.2em;
    }

    .document-row img {
      width: 100px;
      height: 100px;
      border: 1px solid gray;
    }

    .document-row button {
      padding: 0.5em 1em;
      border: none;
      border-radius: 20px;
      background: #007BFF;
      color: white;
      cursor: pointer;
      font-size: 1em;
      box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease 0s;
    }

    .document-row button:hover {
      background: #2E86C1;
      box-shadow: 0px 15px 20px rgba(46, 229, 157, 0.4);
      color: #fff;
      transform: translateY(-7px);
    }

    .document-row span {
      font-weight: bold;
      color: #343A40;
    }

    #iframeContainer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,0.8);
    }

    #iframeContainer iframe {
      width: 80%;
      height: 80%;
    }

    #iframeContainer button {
      position: absolute;
      top: 10px;
      right: 10px;
    }
  </style>
  <script>
    var IsActiveId = false;
    var data = @{outputs('Response_in_JSON')}

    function signNow(capId, cupe_acceladocumenttype) {
      IsActiveId = true;
      document.getElementById('iframeContainer').style.display = 'flex';
    }
    
    window.onload = function() {
      var radioHtml = data.map(function(item, index) {
        return `
        <div class="document-row">
          <input type="radio" id="documentType${index}" name="documentType" value="${item.cupe_acceladocumenttype}">
          <label for="documentType${index}">${item.cupe_acceladocumenttype}</label>
          <span>Status: Pending</span>
          <button onclick="signNow('${item.capId}','${item.cupe_acceladocumenttype}')">Sign Now</button>
          <img src="path_to_your_blank_qr_code.png" alt="QR Code">
        </div>`
      }).join('');
      document.getElementById('documentTypesContainer').innerHTML = radioHtml;
    
      document.getElementById('closeIframeButton').addEventListener('click', function() {
        document.getElementById('iframeContainer').style.display = 'none';
      });
    }
  </script>
</head>
<body>
  <div id="iframeContainer">
    <button id="closeIframeButton">Close</button>
    <iframe src="https://apps.cupertino.org/accela/inspections.aspx"></iframe>
  </div>
  <p>Your record id: @{triggerOutputs()['relativePathParameters']['capId']} </p>
  <p>Required forms for this record</p>
  <div id="documentTypesContainer">
    <!-- Radio buttons with QR code, button and status will be populated here -->
  </div>
</body>
</html>
